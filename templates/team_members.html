
{% extends "layout.html" %}

{% block title %}Team Members{% endblock %}

{% block scripts %}

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/team_members.css') }}">

    <script src="{{ url_for('static', filename='scripts/teams/data_handler_teams.js') }}" defer></script>
    <script src="{{ url_for('static', filename='scripts/teams/teams_dom.js') }}" defer></script>
    <script src="{{ url_for('static', filename='scripts/teams/main_teams.js') }}" defer></script>

{% endblock %}

{% block content %}

    <script> var teamId = {{ team_id }} </script>

    <div class="container" id="team-members">
        <h1>Team Members of {{ team_name }}</h1>

        <!-- Messages with Classes: error, success -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}

        {% for msg_category, message in messages %}
        <p class="{{ msg_category }}">{{ message }}</p>
        {% endfor %}

        {% endif %}
        {% endwith %}

        <!-- Page Navigation Section -->
        <div class="row">
            <div class="col-sm-12">
                {% if role %}
                <button id="back-to-teams">Back to Teams</button>
                {% endif %}
            </div>
        </div>

        <!-- Send Invite -->
        <div class="row" id="team-members-outer">
            <div class="col-sm-12" id="team-members-inner">
                <h4>Invite Users</h4>
                {% if accounts_to_invite %}
                <input list="all-accounts" id="send-invite-input" placeholder="Choose account...">
                <datalist id="all-accounts">
                    {% for account in accounts_to_invite %}
                    <option value="{{ account.id|string + ' - ' + account.name }}">
                    {% endfor %}
                </datalist>
                <button id="send-invite">Send</button>
                {% else %}
                <p>You are the only account in the system currently.</p>
                {% endif %}
            </div>
        </div>

        <!-- Sent Invites (Cancel, Pagination) -->
        <div class="row" id="team-members-outer">
            <div class="col-sm-12" id="team-members-inner">
                <h4>Sent Invites</h4>
                {% if invited_accounts %}
                {% for invited_acc in invited_accounts %}
                <p>{{ invited_acc.id|string + ' - ' + invited_acc.name }}</p>
                <button class="cancel-invite" data-invited-id="{{ invited_acc.id }}">Cancel</button>
                {% endfor %}
                {% else %}
                <p>There are no invites sent out currently.</p>
                {% endif %}
            </div>
        </div>

        <!-- Join Requests (Accept/Decline, Pagination) -->


        <!-- Manage Current Members -->
        <div class="row" id="team-members-outer">
            <div class="col-sm-12" id="team-members-inner">
                <!-- content -->
            </div>
        </div>
    </div>

{% endblock %}
